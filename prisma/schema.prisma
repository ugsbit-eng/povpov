// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model StrategyStats {
  id          String @id @unique
  totalProfit Float
  winCount    Int
  lossCount   Int
  totalTrades Int
  // Storing PNL history as a JSON string
  pnlHistory  String
}

model BotTrade {
  id            String   @id
  pair          String
  chain         String
  entryPrice    Float
  exitPrice     Float
  profit        Float
  profitPercent Float
  timestamp     BigInt
  duration      Int
  createdAt     DateTime @default(now())
}

model BotPosition {
  id                String   @id
  pair              String
  chain             String
  entryPrice        Float
  currentPrice      Float
  unrealizedPnL     Float
  unrealizedPercent Float
  openedAt          BigInt
  duration          Int
  updatedAt         DateTime @updatedAt
  createdAt         DateTime @default(now())
}

model BotMetrics {
  id                String   @id @default("singleton")
  cumulativeProfit  Float
  activeBots        Int
  totalTradeCount   Int
  totalVolume       Float
  isRunning         Boolean
  profitData        String   // JSON array of profit history points
  updatedAt         DateTime @updatedAt
}
